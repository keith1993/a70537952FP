<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Overview</title>

    <link rel="stylesheet" href="Helper/Swiper-master/dist/css/swiper.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="Helper/footable-standalone.latest/css/footable.standalone.css">

    <!-- Bootstrap core CSS -->
    <link href="Public/css/bootstrap1.min.css" rel="stylesheet">
    <link rel="stylesheet" href="Public/css/MDB PRO 4.2.0.css">
    <!-- Material Design Bootstrap-->
    <link href="Public/css/mdb.min.css" rel="stylesheet">
    <link rel="stylesheet" href="Helper/fullcalendar-3.0.1/fullcalendar.css">
    <link href="Public/css/overViewDemo.css" rel="stylesheet">



    <!-- SCRIPTS -->
    <!-- JQuery -->

    <script src="Public/js/jquery-3.1.1.min.js"></script>
    <script src="Helper/fullcalendar-3.0.1/lib/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="Helper/Bootstrap-Confirmation-master/bootstrap-confirmation.js"></script>

    <!-- Tooltips -->
    <script type="text/javascript" src="Public/js/tether.min.js"></script>
    <!-- Bootstrap core JavaScript -->

    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="Public/js/mdb.min.js"></script>
    <script src="Helper/footable-standalone.latest/js/footable.min.js"></script>
    <script type="text/javascript" src="Public/js/overviewDemo.js"></script>
    <script type="text/javascript" src="Helper/Chart.js-master/src/chart.js"></script>
    <script src="Helper/js-cookie-1.5.1/src/js.cookie.js"></script>

    <script src="Helper/Swiper-master/dist/js/swiper.min.js"></script>
    <script src="Helper/Swiper-master/dist/js/swiper.jquery.min.js"></script>
    <script src="Public/js/moment.js"></script>


    <script src="Helper/fullcalendar-3.0.1/lib/moment.min.js"></script>
    <script src="Helper/fullcalendar-3.0.1/fullcalendar.js"></script>



</head>


<body class="fixed-sn hideXScroll">


<!--Double Navigation-->
<header>

    <!-- Sidebar navigation -->
    <ul id="mySidenav" class="side-nav fixed sidenav" style="z-index: 11;">

        <span id="navControl" class="collapsible-header waves-effect"
              style="font-size:30px;cursor:pointer;text-align: center;display: inline-block;width:100%;margin-top: 10px;"
              onclick="setNav()">&#9776; </span>
        <!-- Logo -->
        <li id="userLogo" style="display: none;">
            <div class="logo-wrapper waves-light sn-avatar-wrapper">
                <a href="Application/Controllers/UserProfile.php">
                    <img src="<?php echo " Public/uploads/".$jj->UserImage;?>" class="img-circle">
                </a>
            </div>
        </li>
        <!--/. Logo -->

        <!--Social-->
        <!--RED,PURPLE,DARK,MDB,GRAPHITE,PINK-->
        <li id="colorStyle" style="display: none">
            <ul class="social">
                <li><a class="icons-sm fb-ic" onclick="changeStyle('red')"><i class="fa fa-square" style="color: #900"> </i></a></li>
                <li><a class="icons-sm git-ic" onclick="changeStyle('purple')"><i class="fa fa-square" style="color: #54057d"> </i></a></li>
                <li><a class="icons-sm li-ic" onclick="changeStyle('green')"><i class="fa fa-square" style="color: #003830"> </i></a></li>
                <li><a class="icons-sm yt-ic" onclick="changeStyle('mdb')"><i class="fa fa-square" style="color: #3f729b"> </i></a></li>
                <li><a class="icons-sm gplus-ic" onclick="changeStyle('graphite')"><i class="fa fa-square" style="color: #37474f"> </i></a></li>
                <li><a class="icons-sm li-ic" onclick="changeStyle('pink')"><i class="fa fa-square" style="color: #ab1550"> </i></a></li>

            </ul>
        </li>


        <!--/Social-->

        <!-- Side navigation links -->
        <li id="sideNavItem" style="display: none">
            <ul class="collapsible collapsible-accordion">
                <li><a href="index.php" collapsible-header waves-effect"><i
                        class="fa fa-home"></i>Home</i></a></li>
                <li><a href="Application/Controllers/UserProfile.php" collapsible-header waves-effect"><i
                        class="fa fa-user"></i>Profile</i></a></li>
                <li><a href="Application/Controllers/Ranking.php" class="collapsible-header waves-effect"><i class="fa fa-table"></i>Ranking</i></a></li>

                <li><a href="Application/Controllers/ScheduleSetting.php" class="collapsible-header waves-effect"><i class="fa fa-gear"></i>Schedule Setting</i></a></li>
                <!-- <li><a class="collapsible-header waves-effect"><i class="fa fa-pencil"></i> Contact</i></a></li>
                <li><a class="collapsible-header waves-effect"><i class="fa fa-user"></i> About</i></a></li>-->
            </ul>
        </li>

        <!--/. Side navigation links -->


    </ul>

    <!--/. Sidebar navigation -->

    <!--Navbar-->
    <nav class="navbar navbar-fixed-top scrolling-navbar double-nav main col-lg-12 col-md-12 col-sm-12"
         style="padding-left: 100px;z-index: 10; transition: 0.5s;">

        <!-- SideNav slide-out button -->


        <!-- Breadcrumb-->
        <div class="breadcrumb-dn">
            <p>Welcome,</p>
        </div>


        <ul onclick="showLogout()"id="profile" class="nav navbar-nav pull-right  ">


            <li id="logout"class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false"><i class="fa fa-user"></i> <?php echo $jj->
                    FirstName;?></a>
                <div class="dropdown-menu dropdown-primary dd-right" aria-labelledby="dropdownMenu1"
                     data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">

                    <a class="dropdown-item"
                       href="Application\Controllers\Logout.php">Logout</a>
                </div>
            </li>
        </ul>

    </nav>
    <!--/.Navbar-->

</header>
<div id="wrapper" class="wrapper">

    <div class="swiper-container">
        <div class="swiper-wrapper">

            <div class="swiper-slide">
                <div class="container-fluid content transition main">
                    <div class="row">
                        <div id="CurrentOverview" class="col-md-11 col-lg-6 overviewWhite">
                            <span class="" style="font-size:85px;display: inline-block"><?php echo date('F') ?></span>

                            <div class="container-fluid" style="margin-left: 20px;margin-top: 10px;">
                                <div class="row">
                                    <div class="col-lg-5 incomeOverview">
                                        <span style="font-size:48px;display: inline-block">Incomes</span>
                                        <br>
                                        <div class="overviewGroup">
                                            <span class="">Fixed Salary </span><span class="floatRight">RM <?php echo array_key_exists('Fixed Salary', $CurrentMonthIncome)?$CurrentMonthIncome["Fixed Salary"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Other </span><span class="floatRight">RM <?php echo array_key_exists('Other', $CurrentMonthIncome)?$CurrentMonthIncome["Other"]:"0.00";?></span>
                                            <hr style="border-top: 1px solid rgba(255,255,255,1);">
                                            <span  class="">Total Income </span><span class="floatRight">RM <?php echo number_format($CurrentMonthTotalIncome, 2, '.', '');?></span>
                                        </div>
                                    </div>

                                    <div class="col-lg-5 expenseOverview">
                                        <span style="font-size:48px;display: inline-block">Expenses</span>
                                        <br>
                                        <div class="overviewGroup">

                                            <span class="">Fixed Expense </span><span class="floatRight">RM <?php echo array_key_exists('Fixed expenses', $CurrentMonthExpense)?$CurrentMonthExpense["Fixed expenses"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Debts </span><span class="floatRight">RM <?php echo array_key_exists('Debts', $CurrentMonthExpense)?$CurrentMonthExpense["Debts"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Entertainment </span><span class="floatRight">RM <?php echo array_key_exists('Entertainment', $CurrentMonthExpense)?$CurrentMonthExpense["Entertainment"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Food & Beverage </span><span class="floatRight">RM <?php echo array_key_exists('Food & beverage', $CurrentMonthExpense)?$CurrentMonthExpense["Food & beverage"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Transport </span><span class="floatRight">RM <?php echo array_key_exists('Transport', $CurrentMonthExpense)?$CurrentMonthExpense["Transport"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Other </span><span class="floatRight">RM <?php echo array_key_exists('Others', $CurrentMonthExpense)?$CurrentMonthExpense["Others"]:"0.00";?></span>
                                            <hr style="border-top: 1px solid rgba(255,255,255,1);">
                                            <span  class="">Total Expense </span><span class="floatRight">RM <?php echo number_format($CurrentMonthTotalExpense, 2, '.', '');?></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container-fluid" style="margin-left: 20px;margin-top: 30px;text-align: center;">
                                <span  class="savings">Savings </span><span class="savings">RM <?php echo number_format($CurrentMonthTotalIncome-$CurrentMonthTotalExpense, 2, '.', '');?></span>
                            </div>
                        </div>

                        <div id="CurrentChart" class="col-md-8 col-md-offset-2 col-lg-4">


                            <script>

                                //This will get the first returned node in the jQuery collection.

                                data = {
                                    labels: ["Debts", "Entertainment", "Fixed expenses", "Food & beverage", "Others", "Transport"


                                    ],
                                    datasets: [
                                        {
                                            fillColor: fillColor,
                                            strokeColor: strokeColor,
                                            pointColor: pointColor,
                                            pointStrokeColor: pointStrokeColor,
                                            data: [

                                            <?php

                                                    echo array_key_exists('Debts', $CurrentMonthExpense)?$CurrentMonthExpense["Debts"].",":"0,";
                                echo array_key_exists('Entertainment', $CurrentMonthExpense) ? $CurrentMonthExpense["Entertainment"].",":"0,";
                                echo array_key_exists('Fixed expenses', $CurrentMonthExpense) ? $CurrentMonthExpense["Fixed expenses"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Food & beverage', $CurrentMonthExpense) ? $CurrentMonthExpense["Food & beverage"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Others', $CurrentMonthExpense) ? $CurrentMonthExpense["Others"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Transport', $CurrentMonthExpense) ? $CurrentMonthExpense["Transport"].","
                                :
                                "0,";



                                ?>

                                ]

                                }
                                ]
                                }





                                $('#CurrentChart').empty();
                                $('#CurrentChart').append('<canvas class="myChart"  width="700" height="600"></canvas>');
                                chart = new Chart($(".myChart").get(0).getContext("2d")).Radar(data, options);





                            </script>
                        </div>
                    </div>
                </div>
            </div>

            <div class="swiper-slide">
                <div class="container-fluid content transition main">
                    <div class="row">
                        <div id="overview" class="col-md-11 col-lg-6 overviewWhite">
                            <span class="" style="font-size:85px;display: inline-block"><?php echo date('F', mktime(0, 0, 0, date('m')-1 , 10));?></span>

                            <div class="container-fluid" style="margin-left: 20px;margin-top: 10px;">
                                <div class="row">
                                    <div class="col-lg-5 incomeOverview">
                                        <span style="font-size:48px;display: inline-block">Incomes</span>
                                        <br>
                                        <div class="overviewGroup">
                                            <span class="">Fixed Salary </span><span class="floatRight">RM <?php echo array_key_exists('Fixed Salary', $LastMonthIncome)?$LastMonthIncome["Fixed Salary"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Other </span><span class="floatRight">RM <?php echo array_key_exists('Other', $LastMonthIncome)?$LastMonthIncome["Other"]:"0.00";?></span>
                                            <hr style="border-top: 1px solid rgba(255,255,255,1);">
                                            <span  class="">Total Income </span><span class="floatRight">RM <?php echo number_format($LastMonthTotalIncome, 2, '.', '');?></span>
                                        </div>
                                    </div>

                                    <div class="col-lg-5 expenseOverview">
                                        <span style="font-size:48px;display: inline-block">Expenses</span>
                                        <br>
                                        <div class="overviewGroup">

                                            <span class="">Fixed Expense </span><span class="floatRight">RM <?php echo array_key_exists('Fixed expenses', $LastMonthExpense)?$LastMonthExpense["Fixed expenses"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Debts </span><span class="floatRight">RM <?php echo array_key_exists('Debts', $LastMonthExpense)?$LastMonthExpense["Debts"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Entertainment </span><span class="floatRight">RM <?php echo array_key_exists('Entertainment', $LastMonthExpense)?$LastMonthExpense["Entertainment"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Food & Beverage </span><span class="floatRight">RM <?php echo array_key_exists('Food & beverage', $LastMonthExpense)?$LastMonthExpense["Food & beverage"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Transport </span><span class="floatRight">RM <?php echo array_key_exists('Transport', $LastMonthExpense)?$LastMonthExpense["Transport"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Other </span><span class="floatRight">RM <?php echo array_key_exists('Others', $LastMonthExpense)?$LastMonthExpense["Others"]:"0.00";?></span>
                                            <hr style="border-top: 1px solid rgba(255,255,255,1);">
                                            <span  class="">Total Expense </span><span class="floatRight">RM <?php echo number_format($LastMonthTotalExpense, 2, '.', '');?></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container-fluid" style="margin-left: 20px;margin-top: 30px;text-align: center;">
                                <span  class="savings">Savings </span><span class="savings">RM <?php echo number_format($LastMonthTotalIncome-$LastMonthTotalExpense, 2, '.', '');?></span>
                            </div>
                        </div>

                        <div id="Chart" class="col-md-8 col-md-offset-2 col-lg-4">

                            <canvas id="LastMonthmyChart" width="700" height="600"></canvas>
                            <script>

                                //This will get the first returned node in the jQuery collection.

                                data = {
                                    labels: ["Debts", "Entertainment", "Fixed expenses", "Food & beverage", "Others", "Transport"


                                    ],
                                    datasets: [
                                        {
                                            fillColor: fillColor,
                                            strokeColor: strokeColor,
                                            pointColor: pointColor,
                                            pointStrokeColor: pointStrokeColor,
                                            data: [

                                            <?php

                                                    echo array_key_exists('Debts', $LastMonthExpense)?$LastMonthExpense["Debts"].",":"0,";
                                echo array_key_exists('Entertainment', $LastMonthExpense) ? $LastMonthExpense["Entertainment"].",":"0,";
                                echo array_key_exists('Fixed expenses', $LastMonthExpense) ? $LastMonthExpense["Fixed expenses"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Food & beverage', $LastMonthExpense) ? $LastMonthExpense["Food & beverage"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Others', $LastMonthExpense) ? $LastMonthExpense["Others"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Transport', $LastMonthExpense) ? $LastMonthExpense["Transport"].","
                                :
                                "0,";



                                ?>

                                ]

                                }
                                ]
                                }



                                var ctx2 = $("#LastMonthmyChart").get(0).getContext("2d");

                                LastMonthmyChart = new Chart(ctx2).Radar(data, options);

                            </script>
                        </div>
                    </div>
                </div>
            </div>

            <div class="swiper-slide">
                <div class="container-fluid content transition main">
                    <div class="row">
                        <div id="overview" class="col-md-11 col-lg-6 overviewWhite">
                            <span class="" style="font-size:85px;display: inline-block"><?php echo date('F', mktime(0, 0, 0, date('m')-2 , 10));?></span>

                            <div class="container-fluid" style="margin-left: 20px;margin-top: 10px;">
                                <div class="row">
                                    <div class="col-lg-5 incomeOverview">
                                        <span style="font-size:48px;display: inline-block">Incomes</span>
                                        <br>
                                        <div class="overviewGroup">
                                            <span class="">Fixed Salary </span><span class="floatRight">RM <?php echo array_key_exists('Fixed Salary', $LastLastMonthIncome)?$LastLastMonthIncome["Fixed Salary"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Other </span><span class="floatRight">RM <?php echo array_key_exists('Other', $LastLastMonthIncome)?$LastLastMonthIncome["Other"]:"0.00";?></span>
                                            <hr style="border-top: 1px solid rgba(255,255,255,1);">
                                            <span  class="">Total Income </span><span class="floatRight">RM <?php echo number_format($LastLastMonthTotalIncome, 2, '.', '');?></span>
                                        </div>
                                    </div>

                                    <div class="col-lg-5 expenseOverview">
                                        <span style="font-size:48px;display: inline-block">Expenses</span>
                                        <br>
                                        <div class="overviewGroup">

                                            <span class="">Fixed Expense </span><span class="floatRight">RM <?php echo array_key_exists('Fixed expenses', $LastLastMonthExpense)?$LastLastMonthExpense["Fixed expenses"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Debts </span><span class="floatRight">RM <?php echo array_key_exists('Debts', $LastLastMonthExpense)?$LastLastMonthExpense["Debts"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Entertainment </span><span class="floatRight">RM <?php echo array_key_exists('Entertainment', $LastLastMonthExpense)?$LastLastMonthExpense["Entertainment"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Food & Beverage </span><span class="floatRight">RM <?php echo array_key_exists('Food & beverage', $LastLastMonthExpense)?$LastLastMonthExpense["Food & beverage"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Transport </span><span class="floatRight">RM <?php echo array_key_exists('Transport', $LastLastMonthExpense)?$LastLastMonthExpense["Transport"]:"0.00";?></span>
                                            <br>
                                            <span  class="">Other </span><span class="floatRight">RM <?php echo array_key_exists('Others', $LastLastMonthExpense)?$LastLastMonthExpense["Others"]:"0.00";?></span>
                                            <hr style="border-top: 1px solid rgba(255,255,255,1);">
                                            <span  class="">Total Expense </span><span class="floatRight">RM <?php echo number_format($LastLastMonthTotalExpense, 2, '.', '');?></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="container-fluid" style="margin-left: 20px;margin-top: 30px;text-align: center;">
                                <span  class="savings">Savings </span><span class="savings">RM <?php echo number_format($LastLastMonthTotalIncome-$LastLastMonthTotalExpense, 2, '.', '');?></span>
                            </div>
                        </div>

                        <div id="Chart" class="col-md-8 col-md-offset-2 col-lg-4">

                            <canvas id="LastLastMonthmyChart" width="700" height="600"></canvas>
                            <script>

                                //This will get the first returned node in the jQuery collection.

                                data = {
                                    labels: ["Debts", "Entertainment", "Fixed expenses", "Food & beverage", "Others", "Transport"


                                    ],
                                    datasets: [
                                        {
                                            fillColor: fillColor,
                                            strokeColor: strokeColor,
                                            pointColor: pointColor,
                                            pointStrokeColor: pointStrokeColor,
                                            data: [

                                            <?php

                                                    echo array_key_exists('Debts', $LastLastMonthExpense)?$LastLastMonthExpense["Debts"].",":"0,";
                                echo array_key_exists('Entertainment', $LastLastMonthExpense) ? $LastLastMonthExpense["Entertainment"].",":"0,";
                                echo array_key_exists('Fixed expenses', $LastLastMonthExpense) ? $LastLastMonthExpense["Fixed expenses"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Food & beverage', $LastLastMonthExpense) ? $LastLastMonthExpense["Food & beverage"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Others', $LastLastMonthExpense) ? $LastLastMonthExpense["Others"].","
                                :
                                "0,";
                                echo
                                array_key_exists('Transport', $LastLastMonthExpense) ? $LastLastMonthExpense["Transport"].","
                                :
                                "0,";



                                ?>

                                ]

                                }
                                ]
                                }



                                var ctx3 = $("#LastLastMonthmyChart").get(0).getContext("2d");

                                LastLastMonthmyChart = new Chart(ctx3).Radar(data, options);

                            </script>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- Add Arrows -->
        <div class="swiper-button-next swiper-button-white"></div>
        <div class="swiper-button-prev swiper-button-white"></div>
    </div>



    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide"><div class="IncomeContent transition main">
                <p class="title">Income Detail</p>
                <?php

       echo "<table class=\"tableIncome\" data-paging=\"true\"data-sorting=\"true\"data-filtering=\"true\"data-paging-size=\"10\">
                ";
                echo "
                <thead>";

                echo "
                <th data-type=\"text\">Income Name</th>
                ";
                echo "
                <th data-type=\"number\" >Income Amount(RM)</th>
                ";
                echo "
                <th data-type=\"text\" data-breakpoints=\"xs sm md\">Income Description</th>
                ";
                echo "
                <th data-type=\"date\" data-format-string=\"DD-MM-YYYY\" data-breakpoints=\"xs sm md\">Income Enter Date</th>
                ";
                echo "
                <th data-type=\"html\">Edit</th>
                ";

                echo "
                <th data-type=\"html\">Delete</th>
                ";

                echo "
                </thead>
                ";

                echo "
                <tbody>";
                foreach ($incomeList as $key => $value) {
                echo "
                <tr>";
                    echo "
                    <td>".$value->Income_Name."</td>
                    ";
                    echo "
                    <td>".$value->Income_Amount."</td>
                    ";
                    echo "
                    <td>".$value->Income_Description."</td>
                    ";

                    echo "
                    <td>". $value->Income_EnterDate ."</td>
                    ";

                    echo "
                    <td ><a class=\"btn btn-default btn-sm\" onclick=\"showEditIncome(".$value->IncomeID.");\"><i class=\"fa fa-pencil\"></i> </a></td>
                    ";

                    echo "
                    <td><a  class=\"btn btn-default btn-sm\" href=\"#\" incomeID=\"$value->IncomeID\" delete=\"income\" data-toggle=\"confirmation-singleton\" data-singleton=\"true\" data-original-title=\"\" title=\"\"><i class=\"fa fa-trash-o\"></i> </a ></td>
                    ";

                    echo "
                </tr>
                ";
                }
                echo "
                </tbody>
                ";
                echo "</table>";

                ?>
                <hr class="tableHR"/>
                <input type="button" class="btn btn-default button-collapse btnInsert" onclick="showInsertIncome()"
                       value="Insert Income">

            </div></div>
            <div class="swiper-slide">
                <div class="IncomeContent transition main">
                    <p class="title"></p>

                    <div class='Calendar'></div>
                </div>

            </div>
        </div>
        <!-- Add Arrows -->
        <div class="swiper-button-next swiper-button-black"></div>
        <div class="swiper-button-prev swiper-button-black"></div>
    </div>




    <!--****************************************-->

     <div class="expensesContent transition main">
                <p class="title">Expense Detail</p>
                <?php

       echo "<table class=\"tableExpense\" data-paging=\"true\" data-sorting=\"true\" data-filtering=\"true\"data-paging-size=\"10\" >
                ";
                echo "
                <thead>";

                echo "
                <th data-type=\"text\">Expense Name</th>
                ";
                echo "
                <th data-type=\"number\">Expense Amount(RM)</th>
                ";

                echo "
                <th data-type=\"text\" data-breakpoints=\"xs sm md\">Expense Category</th>
                ";

                echo "
                <th data-type=\"text\" data-breakpoints=\"xs sm md\">Expense Description</th>
                ";
                echo "
                <th data-type=\"date\"  data-format-string=\"DD/MM/YYYY\" data-breakpoints=\"xs sm md\">Expense Enter Date</th>
                ";
                echo "
                <th data-type=\"html\">Edit</th>
                ";

                echo "
                <th data-type=\"html\">Delete</th>
                ";

                echo "
                </thead>
                ";

                echo "
                <tbody>";
                foreach ($expenseList as $key => $value) {
                echo "
                <tr>";
                    echo "
                    <td>".$value->Expense_Name."</td>
                    ";
                    echo "
                    <td>".$value->Expense_Amount."</td>
                    ";

                    echo "
                    <td>".$value->Expense_Category."</td>
                    ";
                    echo "
                    <td>".$value->Expense_Description."</td>
                    ";
                    echo "
                    <td>".$value->Expense_EnterDate."</td>
                    ";


                    echo "
                    <td><a class=\"btn btn-default btn-sm\" onclick=\"showEditExpense(".$value->ExpenseID.");\"><i class=\"fa fa-pencil\"></i> </a></td>
                    ";

                    echo "
                    <td><a  class=\"btn btn-default btn-sm\" href=\"#\" expenseID=\"$value->ExpenseID\" delete=\"expense\" data-toggle=\"confirmation-singleton\" data-singleton=\"true\" data-original-title=\"\" title=\"\"><i class=\"fa fa-trash-o\"></i> </a ></td>
                    ";

                    echo "
                </tr>
                ";


                }
                echo "
                </tbody>
                ";
                echo "</table>";

                ?>
                <hr class="tableHR">
                <input type="button" class="btn btn-default button-collapse btnInsert" onclick="showInsertExpense()"
                       value="Insert Expense">

            </div>







</div>

<div id="popoutInsert" style="display: none;z-index: 50">
    <div class="mask" onclick="hideInsert()"></div>
    <div id="InsertIncome" class="popout" style="display: none;">

        <p class="popoutTitle" style="text-align: center">Insert Income</p>


        <form id="incomeFormID" class="incomeForm" action="Application/Controllers/InsertIncome.php" method="post" role="form">
            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Name" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Name</label>
                <div class="col-xs-12 col-sm-12 col-md-6">
                    <input type="text" name="incomeName" class="form-control" required>
                </div>
            </div>

            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Amount" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Amount</label>
                <div class="col-xs-12 col-sm-12 col-md-2">
                    <input type="number" name="incomeAmount" value="0.00"  pattern="[0-9]+([\.,][0-9]+)?" title="Only Allow Number"step="0.01"required></br>
                </div>
            </div>

            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Description" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Description</label>
                <div class="col-xs-12 col-sm-12 col-md-6">
                    <input type="text" name="incomeDescription" value=""></br></br>
                </div>
            </div>






            <button type="reset" class="btn btn-default" onclick="hideInsert()" style="display: inline-block;margin-bottom: 20px;">Cancel</button>

            <button type="submit" class="btn btn-default"style="margin-bottom: 20px;">Submit</button>
        </form>
    </div>
    <div id="InsertExpense" class="popout" style="display: none;">


        <p class="popoutTitle" style="text-align: center">Insert Expenses</p>
        <form id="expensesFormID" class="form-inline expenseForm " role="form" action="Application/Controllers/InsertExpenses.php"
              method="post">
            <div id="expenseContainer">
                <div>
                    <div class="form-group col-sm-3  col-md-3 col-lg-3">
                        <label for="ExpenseName" class="control-label">Expense Name:</label>
                        <input class="form-control" type="text" name="expenseName[]" value="" required>
                    </div>
                    <div class="form-group col-sm-3  col-md-3 col-lg-3">
                        <label for="ExpenseAmount" class="control-label">Expense Amount:</label>
                        <input class="form-control" type="number" name="expenseAmount[]" value="0.00" pattern="^[0-9]+(\.[0-9]{1,2})?$" title="Only Allow Number" step="0.01"required>

                    </div>
                    <div class="form-group col-sm-3  col-md-3 col-lg-3">
                        <label for=" ExpenseCategory" class="control-label"> Expense Category:</label>

                        <select class="form-control" name="expenseCategory[]"
                                style="display: inline-block" required>

                            <option value="Transport">Transport</option>
                            <option value="Food & beverage">Food & beverage</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Debts">Debts</option>
                            <option value="Fixed expenses">Fixed expenses</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>
                    <div class="form-group col-sm-3  col-md-3 col-lg-3">

                        <label for=" ExpenseDescription" class="control-label"> Expense Description:</label>
                        <input class="form-control" type="text" name="expenseDescription[]" value="">
                    </div>
                    <a style="color: red;margin-left: 10px;display: none">X</a> </br>

                    <hr style="border-top: 1px solid rgba(0,0,0,0.3);width: 90%;margin-top: 0"/>
                </div>
            </div>
            <input id="btnAddExpense" class="form-control btn btn-default button-collapse"
                   style="width: 90%; display: inline-block;font-size: 25px;"
                   type="button" onclick="addExpense()" value="Add"><br/>



            <button type="reset" class="btn btn-default" onclick="hideInsert()" style="display: inline-block;margin-bottom: 20px;">Cancel</button>

            <button type="submit" class="btn btn-default"style="margin-bottom: 20px;">Submit</button>
        </form>
    </div>
</div>
</div>


<div id="popoutEdit" style="display: none;z-index: 50">

    <div class="mask" onclick="hideEdit()"></div>
    <div id="editIncome"class="container-fluid" style="display: none;">
    <div class="row">
        <div class="col-md-6 col-md-offset-3  col-lg-6 col-lg-offset-3  editPopout" style="text-align: center;">
            <form id="editIncomeForm" method="post" action="Application\Controllers\UpdateIncome.php" role="form">
            <div class="col-sm-12">
                <p class="popoutTitle" style="text-align: center">Edit Income</p>
            </div>

            <div style="display: none">
                <p>IncomeID</p><input type="text" name="IncomeID" id="IncomeID" class="form-control" value="" readonly >

            </div>
            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Name" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Name</label>
                <div class="col-xs-12 col-sm-12 col-md-6">
                    <input type="text" name="IncomeName" class="form-control" id="IncomeName" required>
                </div>
            </div>
            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Amount" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Amount</label>
                <div class="col-xs-12 col-sm-12 col-md-6">
                    <input type="number" name="IncomeAmount" class="form-control" id="IncomeAmount" value="0.00" pattern="[0-9]+([\.,][0-9]+)?" title="Only Allow Number" step="0.01" required>
                </div>
            </div>
            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Description" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Description</label>
                <div class="col-xs-12 col-sm-12 col-md-6">
                    <input type="text" name="IncomeDescription" class="form-control" id="IncomeDescription">
                </div>
            </div>

            <div class="form-group col-xs-12 col-sm-12">
                <label for="Income Enter Date" class="col-xs-12  col-sm-12 col-md-5 control-label">Income Enter Date</label>
                <div class="col-xs-12 col-sm-12 col-md-6">
                    <input type="date" name="IncomeEnterDate" class="form-control" id="IncomeEnterDate" required>
                </div>
            </div>



            <button type="reset" class="btn btn-default" onclick="hideEdit()" style="display: inline-block ;margin-bottom: 20px;">Cancel</button>



            <button type="submit" class="btn btn-default" style="margin-bottom: 20px;">Save</button>



            </form>

        </div>
    </div>
</div>
    <div id="editExpense"class="container-fluid" style="display: none;">
        <div class="row">
            <div class="col-md-6 col-md-offset-3  col-lg-6 col-lg-offset-3  editPopout" style="text-align: center;">
                <form id="editExpenseForm" method="post" action="Application\Controllers\UpdateExpense.php" form-horizontal" role="form">
                <div class="col-sm-12">
                    <p class="popoutTitle" style="text-align: center">Edit Expense</p>
                </div>

                <div style="display: none">
                    <p>ExpenseID</p><input type="text" name="ExpenseID" id="ExpenseID" class="form-control" value="" readonly >

                </div>
                <div class="form-group col-xs-12 col-sm-12">
                    <label for="Expense Name" class="col-xs-12  col-sm-12 col-md-5 control-label">Expense Name</label>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <input type="text" name="ExpenseName" class="form-control" id="ExpenseName" required>
                    </div>
                </div>
                <div class="form-group col-xs-12 col-sm-12">
                    <label for="Expense Amount" class="col-xs-12  col-sm-12 col-md-5 control-label">Expense Amount</label>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <input type="number" name="ExpenseAmount" class="form-control" id="ExpenseAmount" value="0.00"   pattern="[0-9]+([\.,][0-9]+)?" title="Only Allow Number" step="0.01" required>
                    </div>
                </div>

                <div class="form-group col-xs-12 col-sm-12">
                    <label for="Expense Category" class="col-xs-12  col-sm-12 col-md-5 control-label">Expense Category</label>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <select id="ExpenseCategory"class="form-control" name="ExpenseCategory"
                                style="display: inline-block" required>

                            <option value="Transport">Transport</option>
                            <option value="Food & beverage">Food & beverage</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Debts">Debts</option>
                            <option value="Fixed expenses">Fixed expenses</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>
                </div>

                <div class="form-group col-xs-12 col-sm-12">
                    <label for="Expense Description" class="col-xs-12  col-sm-12 col-md-5 control-label">Expense Description</label>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <input type="text" name="ExpenseDescription" class="form-control" id="ExpenseDescription">
                    </div>
                </div>

                <div class="form-group col-xs-12 col-sm-12">
                    <label for="Expense Enter Date" class="col-xs-12  col-sm-12 col-md-5 control-label">Expense Enter Date</label>
                    <div class="col-xs-12 col-sm-12 col-md-6">
                        <input type="date" name="ExpenseEnterDate" class="form-control" id="ExpenseEnterDate" required>
                    </div>
                </div>



                <button type="reset" class="btn btn-default" onclick="hideEdit()" style="display: inline-block;margin-bottom: 20px;">Cancel</button>



                <button type="submit" class="btn btn-default"style="display: inline-block;margin-bottom: 20px;">Save</button>



                </form>

            </div>
        </div>
    </div>
</div>






<script>
    var swiper = new Swiper('.swiper-container', {

        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true
    });

    $('.Calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month'
        },
        defaultDate: '<?php echo date("Y-m-d");?>',
        navLinks: true, // can click day/week names to navigate views
        editable: true,
        eventLimit: true, // allow "more" link when too many events
        eventMouseover: function(calEvent, jsEvent) {
            var tooltip = '<div class="tooltipevent" style="width:280px;height:200px;background:#eee;position:absolute;z-index:10001;">';
            if (calEvent.title.toString().indexOf("Expense")!=-1){
                var date = moment(calEvent.start).format('YYYY-MM-DD');
                $.post("Application/Controllers/AJAXGetExpenseByUserIDAndDate.php",
                        {
                            date: date,
                        },
                        function (data, status) {

                            var expenseGroup = JSON.parse(data);

                            for(var expense in expenseGroup ){
                                tooltip+= expense+":RM "+expenseGroup[expense]+"<br>";
                            }
                            tooltip+= "</div>";
                            $("body").append(tooltip);
                        })
            }else{
                var date = moment(calEvent.start).format('YYYY-MM-DD');
                $.post("Application/Controllers/AJAXGetIncomeByUserIDAndDate.php",
                        {
                            date: date,
                        },
                        function (data, status) {

                            var incomeGroup = JSON.parse(data);

                            for(var income in incomeGroup ){
                                tooltip+= income+":RM "+incomeGroup[income]+"<br>";
                            }
                            tooltip+= "</div>";
                            $("body").append(tooltip);
                        })
            }



            $(this).mouseover(function(e) {
                $(this).css('z-index', 10000);
                $('.tooltipevent').fadeIn('500');
                $('.tooltipevent').fadeTo('10', 1.9);
            }).mousemove(function(e) {
                $('.tooltipevent').css('top', e.pageY + 5);
                $('.tooltipevent').css('left', e.pageX + 10);
            });
        },

        eventMouseout: function(calEvent, jsEvent) {
            $(this).css('z-index', 8);
            $('.tooltipevent').remove();
        },
        events: [
<?php
                $i = 0;
        $calendarIncomeLength = count($calendarIncome);
        foreach ($calendarIncome as $key=>$value){
            echo "{";
            echo "title:'Income:RM ".$value->Total_Income."',";
            echo "start:'".$value->Income_Day."'";
            echo "}";
            if($i!=$calendarIncomeLength-1){ echo ",";}
            $i++;
         }


    $ii = 0;
    $calendarExpenseLength = count($calendarExpense);
    if( $calendarIncomeLength>0 && $calendarExpenseLength>0){ echo ",";}
    foreach ($calendarExpense as $key=>$value){


        echo "{";
        echo "title:'Expense:RM ".$value->Total_Expense."',";
        echo "start:'".$value->Expense_Day."'";
        echo "}";
        if($ii!=$calendarExpenseLength-1){ echo ",";}
        $ii++;
    }
    ?>

        ]
    });
</script>



</body>

</html>